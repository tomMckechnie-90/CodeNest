{% extends "base.html" %}{% block content %}
{% load static %}


<!-- Content for this file starts here -->
{% for post in posts %}
<div class="container mt-4 d-flex justify-content-center">
    <div class="card mb-4">
            <h1 class="card-title text-center">{{ post.title }}</h1>
        <p class="text-muted small text-center">Posted on: {{ post.created_at }} </p>
        <img src="{{ post.get_image_url }}" class="card-img-top" id="post-image" alt="{{ post.title }}">
        <div class="card-body">
            {% if not post.slug %}
            <p class="text-danger">Error: Post slug is missing!</p>
            {% endif %}
            <img src="{{ post.author.profile.profile_picture.url }}" alt="{{ post.author.username }}"
                class="profile-picture" style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">
            <a href="{% url 'view_profile' post.author.username %}">
                <p class="text-muted small">Author: {{ post.author }}</p>
            </a>
            <a href="{% url 'post_detail' post.slug %}">
                <p class="card-text">{{ post.content|truncatewords:50 }}</p>
            </a>
            <br>
            <!-- Display the total number of likes -->
            <p>Total Likes: {{ post.total_likes }}</p>
            <p>Total Comments: {{ post.comment_count }}</p>

            <!-- Like Button -->
            <form action="{% url 'like_post' post.id %}" method="POST">
                {% csrf_token %}
                {% if user.is_authenticated %}
                {% if user in post.likes.all %}
                <button type="submit" class="btn btn-danger">Unlike</button>
                {% else %}
                <button type="submit" class="btn btn-primary">Like</button>
                {% endif %}
                {% endif %}
            </form>

            <!-- <i class="fa-solid fa-thumbs-up fa-xs"></i> <i class="fa-solid fa-thumbs-down fa-xs"></i> <i
                class="fa-solid fa-comment fa-xs"></i> -->
        </div>

    </div>
</div>

{% endfor %}

<!-- Content for this files stops here -->
{% endblock %}